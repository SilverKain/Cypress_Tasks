# ПЛАН ОБУЧЕНИЯ CYPRESS: НЕДЕЛЯ 1
## Путь от наблюдателя к проверяющему

---

## ДЕНЬ 1. Что значит «проверить руками» и почему это важно понимать

### 1. Фиксация цели дня
**Что должен ПОНЯТЬ:**
- E2E-тест — это не магия, а имитация реальных действий пользователя
- Перед тем как писать тест, нужно самому пройти сценарий
- Cypress — инструмент записи твоих действий в виде кода

**Что должен УМЕТЬ:**
- Разложить простое действие (например, поиск в Google) на отдельные шаги
- Понимать разницу между «что я делаю» и «что я проверяю»

---

### 2. Теория (без света) — ~2 часа

#### Мысленный эксперимент №1: Опиши другу, как искать в Google
Представь, что твой друг никогда не видел компьютер. Как бы ты объяснил ему процесс поиска?

Вероятно, ты бы сказал:
1. Открой сайт google.com
2. Найди белое поле для ввода текста
3. Напечатай слово «котики»
4. Нажми кнопку «Поиск» или клавишу Enter
5. Убедись, что появились результаты

**Это и есть E2E-сценарий.**

#### Что такое E2E на самом деле?
E2E (End-to-End) — это проверка всего пути пользователя от начала до конца.
- Не проверка кода
- Не проверка базы данных
- А проверка того, что видит и делает ЧЕЛОВЕК

**Пример из жизни:**
Ты заходишь в интернет-магазин, кладёшь товар в корзину, оформляешь заказ.
E2E-тест повторит эти же действия и проверит, что всё работает так, как ожидает покупатель.

#### Зачем это нужно?
Разработчики могут сломать что-то на сайте после обновления. E2E-тесты это поймают раньше, чем об этом узнают пользователи.

#### Типичная ошибка новичка
Новички думают: «Нужно тестировать ВСЁ подряд».
Нет. Нужно тестировать **критичные сценарии** — те, без которых сайт бесполезен.

Для Google критично: поиск работает.
Для магазина критично: покупка проходит.

#### Мысленное упражнение №2
Выбери любой сайт, которым ты пользуешься (YouTube, банковское приложение, соцсеть).
Задай себе вопрос: **«Без какой функции этот сайт станет бесполезным?»**
Вот это и нужно тестировать в первую очередь.

#### Где тут Cypress?
Cypress — это программа, которая умеет:
- Открывать браузер
- Кликать по кнопкам
- Вводить текст
- Проверять, что что-то появилось или исчезло

Ты пишешь на языке, понятном Cypress, что ему делать. А он это выполняет.

**Важно:** сначала ты сам проходишь сценарий вручную. Потом описываешь его Cypress.

---

### 3. Практика (со светом) — ~1.5 часа

#### Шаг 1: Проверь, что Cypress установлен
Открой терминал и выполни:
```
npx cypress open
```

Если откроется окно Cypress — отлично. Закрой его.

#### Шаг 2: Изучи структуру проекта
У тебя уже есть файл `cypress/e2e/google.cy.js`. Открой его и посмотри.

Не важно, что там написано пока. Важно понять: **каждый файл .cy.js — это один тестовый сценарий**.

#### Шаг 3: Пройди сценарий вручную
1. Открой браузер (обычный, не Cypress)
2. Зайди на google.com
3. Введи любое слово в поиск
4. Нажми Enter
5. Посмотри, что изменилось на странице

Запиши на бумаге (или в голове):
- Какой адрес открыл
- На что кликнул
- Что ввёл
- Что появилось в итоге

#### Шаг 4: Запусти существующий тест
В терминале выполни:
```
npx cypress open
```

Выбери E2E Testing → выбери браузер (Chrome или другой) → кликни на файл `google.cy.js`

Наблюдай, как Cypress выполняет действия. Пока не трогай код — просто смотри.

#### Шаг 5: Сравни свои действия с тестом
Открой файл [cypress/e2e/google.cy.js](cypress/e2e/google.cy.js) и сравни:
- Что ты делал руками
- Что Cypress написал в коде

Найди соответствие: где открытие сайта, где ввод текста, где проверка результата.

---

### 4. Критерии «день завершён»

✅ Ты можешь объяснить своими словами, что такое E2E-тест
✅ Ты прошёл простой сценарий вручную и записал шаги
✅ Ты запустил Cypress и увидел, как он выполняет тест
✅ Ты понимаешь, что файл .cy.js — это описание действий, а не магия

---

### 5. Куда это ведёт дальше

Завтра ты откроешь файл с тестом и начнёшь разбирать, **как именно** Cypress понимает, куда кликать и что проверять.

Не заучивая команды, а понимая логику: «Я говорю Cypress: найди ЭТО на странице и сделай ТО».

---

## ДЕНЬ 2. Как Cypress видит страницу (селекторы — твои координаты)

### 1. Фиксация цели дня
**Что должен ПОНЯТЬ:**
- Cypress не видит кнопку как ты. Он видит HTML-элементы
- Селектор — это адрес элемента на странице
- Есть хорошие селекторы (стабильные) и плохие (ломкие)

**Что должен УМЕТЬ:**
- Найти элемент на странице через инструменты разработчика браузера
- Понять, почему `cy.get('button')` может найти не ту кнопку
- Использовать data-атрибуты как надёжный способ поиска

---

### 2. Теория (без света) — ~2.5 часа

#### Мысленный эксперимент №1: Объясни роботу, где кнопка
Представь: ты в большой комнате с 100 одинаковыми столами. Как ты скажешь роботу, к какому столу подойти?

Варианты:
- «Третий слева» — но если добавят стол в начале, робот ошибётся
- «Стол с биркой №47» — надёжно, бирка не меняется

**Селектор — это бирка для элемента на странице.**

#### Как браузер хранит страницу?
Браузер видит страницу как дерево элементов (HTML):
```
<body>
  <header>
    <button>Войти</button>
  </header>
  <main>
    <button>Купить</button>
  </main>
</body>
```

Если ты скажешь Cypress: «Найди `<button>`», — он найдёт ОБОИХ. Какую кликнуть?

#### Способы указать на элемент

**1. По тегу (плохо):**
`cy.get('button')` — найдёт ВСЕ кнопки. Непонятно, какую.

**2. По тексту (средне):**
`cy.contains('Купить')` — найдёт элемент с текстом «Купить». Но текст могут изменить.

**3. По классу (средне):**
`cy.get('.buy-button')` — найдёт элемент с классом `buy-button`. Но дизайнер может переименовать класс.

**4. По data-атрибуту (отлично):**
`cy.get('[data-test="buy-button"]')` — найдёт элемент с атрибутом `data-test="buy-button"`. Это не меняют просто так.

#### Почему это важно?
Твой тест сегодня работает. Завтра дизайнер поменял текст кнопки с «Купить» на «В корзину» — тест сломался.

Если ты использовал `data-test`, тест продолжит работать.

#### Типичная ошибка новичка
Новичок копирует длинный селектор из инструментов разработчика:
```
#root > div > div.container > div:nth-child(3) > button
```

Это как адрес: «дом 5, подъезд 2, этаж 3, квартира 7, комната 2, стол у окна».
Переставили мебель — адрес сломался.

Лучше: «дом с табличкой 'Иванов'». Короче и надёжнее.

#### Мысленное упражнение №2
Открой мысленно любой сайт. Представь кнопку «Войти».
Как бы ты объяснил Cypress, где она?
- «Кнопка в правом верхнем углу» — робот не понимает «угол»
- «Кнопка с текстом 'Войти'» — лучше
- «Кнопка с атрибутом data-test='login'» — идеально

---

### 3. Практика (со светом) — ~1.5 часа

#### Шаг 1: Открой инструменты разработчика
1. Открой google.com в браузере
2. Нажми F12 (или правой кнопкой → «Просмотреть код»)
3. Нажми кнопку «Выбрать элемент» (значок стрелки вверху)
4. Наведи на поле поиска Google
5. Посмотри в коде: это `<input>` или `<textarea>`?

#### Шаг 2: Изучи, как найти элемент
В инструментах разработчика найди поле поиска. Посмотри на его атрибуты:
- есть ли `name="q"`?
- есть ли `title="Поиск"`?

Попробуй в консоли браузера (вкладка Console):
```javascript
document.querySelector('[name="q"]')
```

Если элемент подсветился — селектор работает.

#### Шаг 3: Напиши простой тест с правильным селектором
Открой файл [cypress/e2e/google.cy.js](cypress/e2e/google.cy.js).

Попробуй изменить селектор поля поиска на более надёжный:
```javascript
cy.get('[name="q"]').type('Cypress testing')
```

Запусти тест:
```
npx cypress open
```

Если тест прошёл — отлично. Если нет — перепроверь селектор в инструментах разработчика.

#### Шаг 4: Эксперимент с плохим селектором
Попробуй намеренно указать плохой селектор:
```javascript
cy.get('input').type('Cypress testing')
```

Запусти тест. Cypress может найти ДРУГОЕ поле ввода (если оно есть на странице).

Это показывает, почему важно быть точным.

---

### 4. Критерии «день завершён»

✅ Ты открывал инструменты разработчика и находил элементы на странице
✅ Ты понимаешь, что селектор — это способ указать Cypress на конкретный элемент
✅ Ты видишь разницу между `cy.get('button')` и `cy.get('[data-test="login"]')`
✅ Ты изменил селектор в тесте и тест продолжил работать

---

### 5. Куда это ведёт дальше

Завтра ты узнаешь, что делать ПОСЛЕ того, как нашёл элемент: как кликать, вводить текст, проверять результат.

И поймёшь главное: Cypress выполняет команды не мгновенно — он ждёт, пока элемент появится. Это важно для стабильности.

---

## ДЕНЬ 3. Действия и ожидание (почему тесты не падают, когда страница грузится)

### 1. Фиксация цели дня
**Что должен ПОНЯТЬ:**
- Cypress автоматически ждёт появления элементов (это его суперсила)
- Команды выполняются последовательно, как шаги инструкции
- Не нужно писать «подожди 5 секунд» — Cypress умнее

**Что должен УМЕТЬ:**
- Написать цепочку действий: открыть → ввести → кликнуть → проверить
- Понять, почему тест не падает, даже если страница грузится медленно

---

### 2. Теория (без света) — ~2 часа

#### Мысленный эксперимент №1: Инструкция для человека
Представь, что ты пишешь инструкцию для помощника:
1. Открой дверь
2. Войди в комнату
3. Включи свет
4. Сядь на стул

Человек не включит свет, пока не войдёт в комнату. Он понимает последовательность.

**Cypress работает так же.**

Ты пишешь:
```
cy.visit('сайт')
cy.get('поле').type('текст')
cy.get('кнопка').click()
```

Cypress выполняет по порядку. Он НЕ перейдёт к следующему шагу, пока не выполнит предыдущий.

#### Почему Cypress не падает на медленных сайтах?
Обычная программа:
1. Открыла страницу
2. Сразу ищет кнопку → НЕ НАШЛА (страница ещё грузится) → ОШИБКА

Cypress:
1. Открыл страницу
2. Ищет кнопку → не видит → ждёт
3. Ищет снова → не видит → ждёт
4. Ищет снова → НАШЁЛ → кликает

Это называется **автоматическое ожидание** (retry-ability).

По умолчанию Cypress ждёт до 4 секунд. Если за это время элемент не появился — тест упадёт.

#### Когда тест падает, а когда нет?
**Тест упадёт:**
- Элемента нет на странице (неправильный селектор)
- Элемент скрыт (например, `display: none`)
- Элемент заблокирован (например, кнопка disabled)
- Страница не загрузилась за 4 секунды

**Тест НЕ упадёт:**
- Страница грузится 2 секунды — Cypress подождёт
- Кнопка появляется через 1 секунду после загрузки — Cypress подождёт

#### Типичная ошибка новичка
Новичок видит, что тест «иногда падает», и добавляет:
```javascript
cy.wait(5000) // подожди 5 секунд
```

Это плохо, потому что:
- Если страница загрузилась за 1 секунду, тест ждёт ещё 4 секунды зря
- Если страница грузится 6 секунд, тест всё равно упадёт

Лучше: доверься автоматическому ожиданию Cypress.

#### Мысленное упражнение №2
Представь сайт, где после клика на кнопку появляется модальное окно через 2 секунды.

Как бы ты написал тест?
- Плохо: `cy.click() → cy.wait(2000) → cy.get('окно')`
- Хорошо: `cy.click() → cy.get('окно')` — Cypress сам подождёт появления окна

---

### 3. Практика (со светом) — ~1.5 часа

#### Шаг 1: Напиши цепочку действий
Открой файл [cypress/e2e/google.cy.js](cypress/e2e/google.cy.js).

Напиши тест, который:
1. Открывает google.com
2. Вводит текст в поиск
3. Нажимает Enter
4. Проверяет, что появились результаты

Пример:
```javascript
describe('Поиск в Google', () => {
  it('находит результаты по запросу', () => {
    cy.visit('https://www.google.com')
    cy.get('[name="q"]').type('Cypress E2E testing{enter}')
    cy.contains('результат').should('be.visible')
  })
})
```

#### Шаг 2: Запусти тест и наблюдай
```
npx cypress open
```

Обрати внимание:
- Как быстро Cypress переходит от одной команды к другой
- Есть ли паузы? (Это автоматическое ожидание в действии)

#### Шаг 3: Эксперимент с ожиданием
Попробуй добавить в тест элемент, которого НЕТ на странице:
```javascript
cy.get('[data-test="несуществующий-элемент"]').click()
```

Запусти тест. Посмотри, как Cypress ждёт 4 секунды, а потом падает с ошибкой.

Это хорошо — так ты понимаешь, что тест действительно проверяет наличие элемента.

#### Шаг 4: Убери фиктивный элемент
Удали строку с несуществующим элементом. Тест должен снова проходить.

---

### 4. Критерии «день завершён»

✅ Ты написал тест из 3-4 шагов (открыть → действие → проверка)
✅ Ты понимаешь, что Cypress сам ждёт появления элементов
✅ Ты видел, как тест падает, если элемента нет, и сколько времени он ждёт
✅ Ты НЕ использовал `cy.wait(5000)` без необходимости

---

### 5. Куда это ведёт дальше

Завтра ты узнаешь, как ПРОВЕРЯТЬ результат действий. Не просто «кликнул и всё», а «кликнул — и убедился, что появилось ТО, что ожидалось».

Это называется **assertions** (утверждения), и это сердце любого теста.

---

## ДЕНЬ 4. Проверки (как убедиться, что всё работает)

### 1. Фиксация цели дня
**Что должен ПОНЯТЬ:**
- Тест без проверки — бесполезен (он просто кликает, но не контролирует результат)
- Проверка — это утверждение: «Я ожидаю, что элемент виден / текст такой-то / URL изменился»
- Cypress проверяет автоматически и ждёт, пока условие станет истинным

**Что должен УМЕТЬ:**
- Написать проверку на видимость элемента
- Проверить текст элемента
- Понять, когда тест должен упасть (если проверка не прошла)

---

### 2. Теория (без света) — ~2.5 часа

#### Мысленный эксперимент №1: Проверка в жизни
Ты попросил друга купить молоко. Он вернулся.

Два варианта:
1. Ты не проверил — считаешь, что задача выполнена
2. Ты спросил: «Где молоко?» — друг показывает пакет

**Без проверки ты не знаешь, выполнена ли задача.**

Тест без проверки:
```javascript
cy.get('кнопка').click()
```
Он кликнул. А что произошло? Неизвестно.

Тест с проверкой:
```javascript
cy.get('кнопка').click()
cy.contains('Успешно').should('be.visible')
```
Он кликнул И убедился, что появилось сообщение «Успешно».

#### Что такое assertion (утверждение)?
Это команда Cypress: «Я утверждаю, что элемент находится в таком состоянии».

Примеры утверждений:
- `should('be.visible')` — элемент виден
- `should('have.text', 'Привет')` — текст элемента «Привет»
- `should('have.attr', 'href')` — у элемента есть атрибут href

Если утверждение не выполнилось, тест падает.

#### Почему проверки не падают мгновенно?
Cypress ждёт, пока условие станет истинным (как с поиском элементов).

Пример:
```javascript
cy.get('кнопка').click()
cy.get('.сообщение').should('be.visible')
```

Cypress:
1. Кликает по кнопке
2. Ищет `.сообщение` → не видит → ждёт
3. Ищет снова → НЕ ВИДИТ → ждёт
4. Ищет снова → ВИДИТ → тест прошёл

Если за 4 секунды сообщение не появилось — тест упадёт.

#### Типичная ошибка новичка
Новичок пишет тест без проверок:
```javascript
cy.visit('сайт')
cy.get('кнопка').click()
// всё
```

Тест «проходит», даже если кнопка ничего не сделала. Это иллюзия работы.

#### Мысленное упражнение №2
Представь тест для входа на сайт:
1. Ввести логин
2. Ввести пароль
3. Кликнуть «Войти»

Какие проверки нужны?
- URL изменился на `/dashboard`
- Появилось имя пользователя
- Кнопка «Выйти» видна

Без этих проверок ты не знаешь, вошёл ли пользователь.

---

### 3. Практика (со светом) — ~1.5 часа

#### Шаг 1: Добавь проверку в существующий тест
Открой [cypress/e2e/google.cy.js](cypress/e2e/google.cy.js).

Найди строку, где Cypress что-то делает (например, ищет). Добавь проверку:
```javascript
cy.get('[name="q"]').type('Cypress testing{enter}')
cy.get('#search').should('be.visible') // проверка: блок результатов виден
```

Запусти тест. Если тест прошёл — проверка сработала.

#### Шаг 2: Проверь текст элемента
Добавь проверку на наличие определённого текста в результатах:
```javascript
cy.contains('Cypress').should('be.visible')
```

Это утверждение: «На странице есть элемент с текстом 'Cypress', и он виден».

#### Шаг 3: Эксперимент с неверной проверкой
Попробуй добавить заведомо ложную проверку:
```javascript
cy.contains('Несуществующий текст').should('be.visible')
```

Запусти тест. Cypress будет ждать 4 секунды, не найдёт элемент и упадёт с ошибкой.

Это правильное поведение — тест должен падать, если ожидание не оправдалось.

#### Шаг 4: Убери ложную проверку
Удали строку с неверной проверкой. Тест должен снова проходить.

---

### 4. Критерии «день завершён»

✅ Ты добавил хотя бы одну проверку `.should()` в тест
✅ Ты понимаешь, что тест без проверки не имеет смысла
✅ Ты видел, как тест падает, если проверка не проходит
✅ Ты не пишешь тесты, которые «просто кликают»

---

### 5. Куда это ведёт дальше

Завтра ты научишься читать ошибки Cypress. Когда тест падает, Cypress показывает, ЧТО пошло не так.

Умение читать ошибки — это 50% навыка тестировщика.

---

## ДЕНЬ 5. Чтение ошибок (как понять, что сломалось)

### 1. Фиксация цели дня
**Что должен ПОНЯТЬ:**
- Ошибка теста — это не катастрофа, а информация
- Cypress показывает, на каком шаге тест упал и почему
- Ошибка может быть в тесте, в сайте или в селекторе

**Что должен УМЕТЬ:**
- Прочитать ошибку и понять, что пошло не так
- Найти строку кода, где упал тест
- Понять разницу между «элемент не найден» и «элемент скрыт»

---

### 2. Теория (без света) — ~2 часа

#### Мысленный эксперимент №1: Инструкция не работает
Ты дал другу инструкцию: «Пойди в комнату, открой шкаф, возьми книгу».

Друг вернулся и сказал: «Не получилось».

Что ты спросишь?
1. Ты нашёл комнату?
2. Ты открыл шкаф?
3. Книга была в шкафу?

**Ошибка Cypress работает так же:** она говорит, НА КАКОМ шаге застрял.

#### Основные типы ошибок

**1. Элемент не найден**
```
Timed out retrying: Expected to find element: '[data-test="кнопка"]', but never found it.
```

Причины:
- Неправильный селектор
- Элемент появляется позже (больше 4 секунд)
- Страница не загрузилась

**2. Элемент скрыт**
```
cy.click() failed because this element is not visible
```

Причины:
- Элемент есть в коде, но скрыт CSS (display: none)
- Элемент за другим элементом
- Элемент вне экрана

**3. Неверный текст**
```
Expected to have text 'Привет', but found 'Hello'
```

Причины:
- Текст на сайте изменился
- Неправильная проверка в тесте

#### Как читать ошибку?
Cypress показывает:
1. Какая команда упала (например, `cy.get()`)
2. Какой селектор не сработал
3. Сколько времени ждал (обычно 4000 мс)

Пример:
```
CypressError: Timed out retrying after 4000ms: Expected to find element: '#login', but never found it.
```

Перевод: «Я ждал 4 секунды, искал элемент с id='login', но не нашёл».

#### Типичная ошибка новичка
Новичок видит ошибку и думает: «Cypress глючит».
Нет. Cypress показывает, что на сайте что-то не так ИЛИ тест написан неправильно.

#### Мысленное упражнение №2
Представь: тест падает с ошибкой «Элемент не найден».

Твои действия:
1. Открой сайт вручную
2. Проверь, есть ли элемент на странице
3. Если есть — проверь селектор в инструментах разработчика
4. Если нет — возможно, сайт сломан

---

### 3. Практика (со светом) — ~1.5 часа

#### Шаг 1: Намеренно сломай тест
Открой [cypress/e2e/google.cy.js](cypress/e2e/google.cy.js).

Измени селектор на неправильный:
```javascript
cy.get('[name="несуществующееполе"]').type('текст')
```

Запусти тест. Посмотри на ошибку в Cypress.

#### Шаг 2: Прочитай ошибку
Cypress покажет:
- Команду, которая упала
- Селектор, который не сработал
- Время ожидания

Найди в ошибке фразу: `Expected to find element`.

Это значит: Cypress не нашёл элемент. Проблема в селекторе.

#### Шаг 3: Исправь селектор
Верни правильный селектор:
```javascript
cy.get('[name="q"]').type('текст')
```

Запусти тест. Ошибка исчезла.

#### Шаг 4: Эксперимент с неверной проверкой
Добавь проверку с неправильным текстом:
```javascript
cy.contains('Cypress').should('have.text', 'НЕВЕРНЫЙТЕКСТ')
```

Запусти тест. Посмотри на ошибку:
```
Expected 'Cypress - JavaScript End to End Testing Framework' to have text 'НЕВЕРНЫЙТЕКСТ'
```

Cypress показывает, какой текст ожидал и какой нашёл.

#### Шаг 5: Убери неверную проверку
Удали строку. Тест должен проходить.

---

### 4. Критерии «день завершён»

✅ Ты намеренно сломал тест и прочитал ошибку
✅ Ты понимаешь, что ошибка — это подсказка, а не враг
✅ Ты нашёл в ошибке: какая команда упала, какой селектор, сколько ждал
✅ Ты исправил ошибку и тест снова прошёл

---

### 5. Куда это ведёт дальше

Завтра ты узнаешь, как сделать тесты **стабильными**. Иногда тест «иногда падает» — это проблема не сайта, а теста.

Ты научишься избегать таких ситуаций.

---

## ДЕНЬ 6. Стабильность тестов (почему тест не должен «иногда падать»)

### 1. Фиксация цели дня
**Что должен ПОНЯТЬ:**
- Тест должен быть предсказуемым: либо ВСЕГДА падает, либо ВСЕГДА проходит
- «Иногда падает» — признак плохого теста (flaky test)
- Причины нестабильности: внешние зависимости, случайные данные, плохие селекторы

**Что должен УМЕТЬ:**
- Написать тест, который не зависит от случайных факторов
- Использовать фикстуры вместо реальных данных
- Понять, когда тест нужно исправить, а когда проблема в сайте

---

### 2. Теория (без света) — ~2.5 часа

#### Мысленный эксперимент №1: Ненадёжная инструкция
Ты написал инструкцию: «Возьми ЛЮБУЮ книгу с полки».

Проблема: каждый раз будут брать разные книги. Если одна книга — рецепты, а другая — фантастика, результат непредсказуем.

**Нестабильный тест работает так же.**

Пример:
```javascript
cy.get('button').first().click()
```

Если на странице кнопки появляются в случайном порядке, каждый раз будет кликаться разная кнопка.

#### Причины нестабильности

**1. Зависимость от порядка элементов**
```javascript
cy.get('li').eq(2).click() // клик на третий элемент списка
```

Если список динамический (элементы добавляются/удаляются), тест сломается.

**2. Зависимость от реальных данных**
Тест регистрирует пользователя с email `test@test.com`.
Запустили тест второй раз → email уже занят → тест упал.

**3. Зависимость от времени**
```javascript
cy.wait(3000) // жёсткое ожидание
```

Если страница загрузилась за 4 секунды, тест упадёт.

**4. Зависимость от внешних сервисов**
Тест проверяет погоду на реальном API. Если API недоступен, тест упадёт.

#### Как сделать тест стабильным?

**1. Используй точные селекторы**
Вместо: `cy.get('button').first()`
Лучше: `cy.get('[data-test="submit-button"]')`

**2. Используй фикстуры (заготовленные данные)**
Вместо реального API с погодой — используй заранее подготовленный JSON с ответом.

**3. Избегай жёстких ожиданий**
Вместо: `cy.wait(3000)`
Лучше: `cy.get('элемент').should('be.visible')` — Cypress сам подождёт.

**4. Очищай данные перед тестом**
Если тест создаёт пользователя, добавь в начало теста удаление этого пользователя (если он существует).

#### Типичная ошибка новичка
Новичок запускает тест 10 раз. 9 раз прошёл, 1 раз упал.
Новичок думает: «Ну, иногда бывает».

Нет. Это проблема. Тест должен быть надёжным.

#### Мысленное упражнение №2
Представь тест для интернет-магазина: «Добавить товар в корзину».

Нестабильный вариант:
- Тест кликает на первый товар в списке
- Но список товаров зависит от акций (меняется каждый день)

Стабильный вариант:
- Тест ищет товар по конкретному data-атрибуту: `[data-test="product-123"]`
- Товар не меняется

---

### 3. Практика (со светом) — ~1.5 часа

#### Шаг 1: Создай нестабильный тест
Открой [cypress/e2e/google.cy.js](cypress/e2e/google.cy.js).

Напиши тест, который кликает на первый результат поиска:
```javascript
cy.visit('https://www.google.com')
cy.get('[name="q"]').type('Cypress{enter}')
cy.get('#search a').first().click()
```

Запусти тест несколько раз. Каждый раз будет кликаться первая ссылка в результатах.

Но результаты могут меняться (зависят от региона, истории поиска). Тест нестабилен.

#### Шаг 2: Сделай тест стабильным
Вместо клика на первую ссылку, проверь конкретный текст:
```javascript
cy.visit('https://www.google.com')
cy.get('[name="q"]').type('Cypress{enter}')
cy.contains('Cypress.io').should('be.visible')
```

Теперь тест просто проверяет, что в результатах есть упоминание Cypress.io. Это предсказуемо.

#### Шаг 3: Эксперимент с жёстким ожиданием
Добавь в тест:
```javascript
cy.wait(5000) // жёсткая задержка
```

Запусти тест. Он будет ждать 5 секунд, даже если страница загрузилась за 1 секунду.

Это замедляет тест и не делает его надёжнее.

#### Шаг 4: Убери жёсткое ожидание
Удали `cy.wait(5000)`. Тест должен работать быстрее и так же стабильно.

---

### 4. Критерии «день завершён»

✅ Ты понимаешь, что такое flaky test (нестабильный тест)
✅ Ты написал тест, который не зависит от порядка элементов
✅ Ты НЕ используешь `cy.wait(время)` без необходимости
✅ Ты используешь точные селекторы (data-атрибуты)

---

### 5. Куда это ведёт дальше

Завтра — последний день первой недели. Ты узнаешь, когда тесты НЕ нужны, и как не тестировать лишнее.

Это важно: плохой тест хуже, чем отсутствие теста.

---

## ДЕНЬ 7. Когда НЕ писать тесты (и что делать с тем, что узнал)

### 1. Фиксация цели дня
**Что должен ПОНЯТЬ:**
- Не нужно тестировать ВСЁ — это бессмысленно
- Тесты должны проверять критичные сценарии, а не каждую кнопку
- Плохой тест требует больше времени на поддержку, чем приносит пользы

**Что должен УМЕТЬ:**
- Решить, стоит ли писать тест для конкретного сценария
- Понять, когда достаточно ручного тестирования
- Подвести итоги недели и понять, что изучать дальше

---

### 2. Теория (без света) — ~3 часа

#### Мысленный эксперимент №1: Проверять ли всё?
Представь: ты управляешь автомобилем. Перед каждой поездкой ты можешь:
1. Проверить масло
2. Проверить шины
3. Проверить фары
4. Проверить тормоза
5. Проверить дворники
6. Проверить радио

Что критично? Тормоза и шины.
Что не критично? Радио.

**Тесты работают так же:** проверяй важное, не трать время на мелочи.

#### Когда НЕ писать E2E-тест?

**1. Функция редко используется**
Если кнопка «Экспорт в PDF» используется 1% пользователей, E2E-тест для неё избыточен.

**2. Функция быстро меняется**
Если дизайн страницы переделывают каждую неделю, тест будет постоянно ломаться. Дешевле проверить руками.

**3. Функция простая и очевидная**
Проверять, что кнопка «Закрыть» закрывает окно, — излишне. Это слишком просто, чтобы сломаться.

**4. Есть unit-тесты**
Если функция уже проверена на уровне кода (unit-тесты), E2E-тест дублирует проверку.

#### Когда писать E2E-тест?

**1. Критичный сценарий**
Вход на сайт, оплата, регистрация — если это сломается, бизнес пострадает.

**2. Часто используемая функция**
Поиск, добавление в корзину, отправка сообщения — если это сломается, пользователи уйдут.

**3. Сложный сценарий**
Многошаговый процесс (например, оформление заказа в 5 шагов) легко сломать изменением одного элемента.

#### Правило 80/20
80% проблем ловятся 20% тестов.

Лучше иметь 10 стабильных тестов на критичные сценарии, чем 100 тестов на всё подряд.

#### Типичная ошибка новичка
Новичок пишет тесты на всё: каждую кнопку, каждое поле, каждую страницу.
Результат: 100 тестов, половина падают после каждого обновления дизайна.

Лучше: 10 тестов, которые проверяют то, без чего сайт мёртв.

#### Мысленное упражнение №2
Представь сайт с функциями:
1. Вход в аккаунт
2. Поиск товаров
3. Добавление в корзину
4. Оплата
5. Изменение цвета темы (светлая/тёмная)
6. Подписка на рассылку

Какие сценарии критичны?
- 1, 2, 3, 4 — без них сайт бесполезен.
- 5, 6 — приятные, но не критичные.

Пиши тесты на 1-4. На 5-6 можно проверить руками.

---

### 3. Практика (со светом) — ~1.5 часа

#### Шаг 1: Оцени существующий тест
Открой [cypress/e2e/google.cy.js](cypress/e2e/google.cy.js).

Задай себе вопросы:
1. Проверяет ли тест критичный сценарий? (Да: поиск — основная функция Google)
2. Стабилен ли тест? (Если селекторы правильные — да)
3. Приносит ли тест пользу? (Да: если поиск сломается, тест упадёт)

Если на все три вопроса «да» — тест имеет смысл.

#### Шаг 2: Придумай сценарий, который НЕ стоит тестировать
Напиши комментарий в файле:
```javascript
// Сценарий, который НЕ стоит тестировать:
// - Изменение языка интерфейса (не критично)
// - Проверка цвета кнопки (визуальное тестирование, не E2E)
```

Это помогает осознать границы: что важно, а что — нет.

#### Шаг 3: Подведи итоги недели
Создай файл в корне проекта: `Что я узнал.md`

Напиши кратко:
- Что я понял про E2E-тесты?
- Какие команды Cypress я использовал?
- Какие ошибки я видел и исправил?
- Что мне ещё непонятно?

Это саморефлексия — важный навык тестировщика.

---

### 4. Критерии «день завершён»

✅ Ты понимаешь, что НЕ всё нужно тестировать
✅ Ты можешь решить: стоит ли писать тест для конкретного сценария
✅ Ты создал файл с итогами недели
✅ Ты готов к следующему этапу обучения

---

### 5. Что дальше?

**Ты прошёл фундамент.**

Теперь ты понимаешь:
- Что такое E2E-тест и зачем он нужен
- Как Cypress выполняет команды и ждёт элементы
- Как находить элементы (селекторы)
- Как проверять результат (assertions)
- Как читать ошибки
- Как делать тесты стабильными
- Когда тесты НЕ нужны

**На следующей неделе** (если продолжишь):
- Работа с формами (ввод, выбор, загрузка файлов)
- Перехваты запросов (fixtures, cy.intercept)
- Организация тестов (beforeEach, переиспользование кода)
- Работа с данными (переменные, алиасы)

Но это уже следующий уровень. Пока — закрепи то, что узнал на этой неделе.

---

## ЗАМЕТКИ ДЛЯ ПРОДОЛЖЕНИЯ

Если ученик запросит **продолжение**, двигаться в таких направлениях:

**Неделя 2: Углубление**
- Работа с формами (checkbox, radio, select, file upload)
- Алиасы и переменные
- beforeEach / afterEach
- Группировка тестов (describe)

**Неделя 3: Реальность**
- Работа с API (cy.request, cy.intercept)
- Фикстуры и моки
- Переиспользование кода (custom commands)
- Работа с куками и localStorage

**Неделя 4: Стратегия**
- Page Object Model
- Стратегии организации тестов
- CI/CD (запуск тестов автоматически)
- Отчёты и скриншоты при падении

---

## НАПОМИНАНИЕ НАСТАВНИКУ

- Не перегружать терминами
- Объяснять СМЫСЛОМ, а не синтаксисом
- Поддерживать, а не поучать
- Двигаться от простого к сложному
- Всегда давать возможность закрепить практикой

**Успехов ученику в обучении!**
